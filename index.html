<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Inner Path Map · Lumi Studios</title>
  <link rel="stylesheet" href="style.css" />

  <!-- 字體 -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Spectral:wght@400;600&display=swap" rel="stylesheet">
</head>

<body>
  <div id="app">

    <!-- ======================================================
         SCREEN 0 — LANGUAGE SELECTION
    ====================================================== -->
    <section id="language-screen" class="screen screen-active">
      <div class="card-centered">
        <h1 class="app-title-en">The Inner Path Map</h1>
        <h2 class="app-title-zh">內在修行路徑圖</h2>
        <p class="subtitle" data-lang-en="A Buddhist-based inner tendencies assessment"
                           data-lang-zh="一款基於佛典的內在心性測驗">
            A Buddhist-based inner tendencies assessment
        </p>

        <button class="lang-btn" onclick="selectLanguage('en')">English</button>
        <button class="lang-btn" onclick="selectLanguage('zh')">中文</button>
      </div>
    </section>


    <!-- ======================================================
         SCREEN 1 — USER INFO (NAME + DATE)
    ====================================================== -->
    <section id="info-screen" class="screen">
      <div class="card-centered">

        <h2 data-lang-en="Before we begin"
            data-lang-zh="開始前的資訊">
            Before we begin
        </h2>

        <label data-lang-en="Your Name"
               data-lang-zh="你的名字">
          Your Name
        </label>
        <input id="userName" type="text" placeholder="Your name" />

        <label data-lang-en="Today's Date"
               data-lang-zh="今天日期">
          Today's Date
        </label>
        <input id="userDate" type="date" />

        <button class="action-btn next-btn" onclick="goToQuestions()"
                data-lang-en="Start"
                data-lang-zh="開始測試">
            Start
        </button>

        <button class="ghost-btn" onclick="goBack('language-screen')"
                data-lang-en="Back"
                data-lang-zh="返回">
            返回
        </button>
      </div>
    </section>


    <!-- ======================================================
         SCREEN 2 — QUESTIONNAIRE
    ====================================================== -->
    <section id="question-screen" class="screen">
      <div class="question-wrapper">

        <div id="questionCounter">Q0 / 10</div>

        <h3 id="questionText">Question text here…</h3>

        <div id="optionsContainer">
          <!-- JS 會生成選項 -->
        </div>

        <div class="question-nav">
          <button id="backBtn" class="ghost-btn" onclick="prevQuestion()"
                  data-lang-en="Back"
                  data-lang-zh="返回">
            Back
          </button>

          <button id="nextBtn" class="action-btn"
                  onclick="nextQuestion()"
                  data-lang-en="Next"
                  data-lang-zh="下一題">
            Next
          </button>
        </div>
      </div>
    </section>


    <!-- ======================================================
         SCREEN 3 — RESULT PAGE (信行 / 法行)
         已整合 SHARE 按鈕
    ====================================================== -->
    <section id="result-screen" class="screen">

      <header class="result-header">
        <h1 class="app-title-en">The Inner Path Map</h1>
        <h2 class="app-title-zh">內在修行路徑圖</h2>
        <p class="app-subtitle"
           data-lang-en="Your practitioner type and inner tendencies"
           data-lang-zh="你的修行行者類型與內在傾向">
        </p>
      </header>

      <div class="result-aura">
        <article id="resultCard" class="result-card">
          <!-- JS 會填入信行人／法行人 -->
        </article>
      </div>

      <div class="result-actions">
        <button id="learnMoreBtn" class="action-btn learn-btn"
                data-lang-en="Learn More"
                data-lang-zh="了解更多">
          Learn More
        </button>

        <!-- 分享結果按鈕 -->
        <button id="shareBtn" class="action-btn share-btn"
                data-lang-en="Share Result"
                data-lang-zh="分享結果">
          分享結果
        </button>

        <button id="restartBtn" class="ghost-btn"
                onclick="restartAssessment()"
                data-lang-en="Retake Assessment"
                data-lang-zh="重新測驗">
          Retake Assessment
        </button>
      </div>

    </section>


    <!-- ======================================================
         SCREEN 4 — LEARN MORE
         含 Legal Notes + Accordion
    ====================================================== -->
    <section id="learn-faculties" class="screen learn-section">
      <div class="lm-wrapper">

        <h2 data-lang-en="About This Assessment"
            data-lang-zh="關於此修行測驗">
          About This Assessment
        </h2>

        <p class="lm-intro"
           data-lang-en="This tool maps your inner tendencies according to classical Buddhist psychology.  
           Each question corresponds to a mental habit described in the Pāli Canon and Āgamas."
           data-lang-zh="此工具依據佛典中的心性結構，測量你的五習性與入道傾向。每一題皆對應阿含與巴利經中的心行描述。">
        </p>

        <!-- Info Cards -->
        <div class="lm-card">
          <h3 data-lang-en="Five Dispositions"
              data-lang-zh="五習性">
            五習性
          </h3>
          <p data-lang-en="Greed-type, Aversion-type, Delusion-type, Faith-soft, Insight-analytic"
             data-lang-zh="貪行性、瞋行性、癡行性、信柔型、智觀型">
          </p>
        </div>

        <div class="lm-card">
          <h3 data-lang-en="Five Faculties & Powers"
              data-lang-zh="五根五力">
            五根五力
          </h3>
          <p data-lang-en="Faith, Effort, Mindfulness, Concentration, Wisdom"
             data-lang-zh="信根、精進根、念根、定根、慧根">
          </p>
        </div>

        <!-- Sutta Accordion 容器 -->
        <h3 class="lm-section-title"
            data-lang-en="Canonical Sources"
            data-lang-zh="經典依據">
          經典依據
        </h3>

        <div id="suttaAccordion">
          <!-- 你之前生成的 Accordion HTML 放在這裡 -->
        </div>

        <!-- LEGAL SECTION -->
        <div class="legal-section">

          <h3 data-lang-en="Legal Notes & Attribution"
              data-lang-zh="法律聲明與經典出處">
            法律聲明與經典出處
          </h3>

          <p data-lang-en="This tool is a religious-oriented assessment inspired by classical Buddhist psychology. It is not a medical, psychological, or diagnostic instrument."
             data-lang-zh="本工具為宗教導向的心性測評，靈感源自佛教心理學經典，不屬於醫療、心理諮商或診斷用途。">
          </p>

          <p data-lang-en="Canonical references include: Pāli Nikāyas (AN, SN), Chinese Āgamas (SA, EA, T-series), and Tibetan Kangyur translations."
             data-lang-zh="經典引用包含：巴利經藏（AN、SN）、漢譯阿含（雜阿含 SA、增一阿含 EA、大正藏 T 系列）以及《甘珠爾》藏譯經典。">
          </p>

          <p data-lang-en="All textual materials belong to their respective public-domain canonical collections. This assessment offers interpretive summaries, not authoritative scholastic doctrine."
             data-lang-zh="所有經文內容皆屬公共領域之佛教典籍。本測評提供的是詮釋式摘要，並非權威宗教註解。">
          </p>

          <p data-lang-en="User results are for personal reflection only. Lumi Studios is not liable for decisions made based on this assessment."
             data-lang-zh="本測評之結果僅供個人反思，不構成任何決策建議。Lumi Studios 不對依此做出的決策承擔責任。">
          </p>

          <p class="legal-brand">
            © Lumi Studios 光靈 — The Inner Path Map v3
          </p>

        </div>

        <button class="ghost-btn" onclick="goBack('result-screen')"
                data-lang-en="Back to result"
                data-lang-zh="返回結果">
          返回結果
        </button>

      </div>
    </section>

  </div><!-- end #app -->


  <!-- ======================================================
       SHARE MODULE JS
  ====================================================== -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const shareBtn = document.getElementById("shareBtn");

      if (shareBtn) {
        shareBtn.addEventListener("click", () => {
          const resultText = document.getElementById("resultCard").innerText;

          if (navigator.share) {
            navigator.share({
              title: "Inner Path Map – 修行行者結果",
              text: resultText,
              url: window.location.href
            }).catch(err => console.error("Share failed:", err));
          } else {
            alert("Sharing is not supported on this device.");
          }
        });
      }
    });
  </script>

  <!-- APP JS -->
  <script src="app.js"></script>

</body>
</html>
